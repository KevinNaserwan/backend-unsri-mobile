{
  "info": {
    "_postman_id": "unsri-backend-staff-testing",
    "name": "UNSRI Backend - Staff Testing",
    "description": "Testing collection untuk role Staff dengan test scripts dan assertions lengkap - Full administrative access",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "unsri-backend"
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register (Staff)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has success field\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"Response has user data with staff role\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.expect(jsonData.data).to.have.property('role');",
                  "    pm.expect(jsonData.data.role).to.eql('staff');",
                  "});",
                  "",
                  "// Save user ID for later use",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_staff_id\", jsonData.data.id);",
                  "    pm.collectionVariables.set(\"test_staff_email\", jsonData.data.email);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test.staff@unsri.ac.id\",\n  \"password\": \"password123\",\n  \"role\": \"staff\",\n  \"nama\": \"Test Staff\",\n  \"nip\": \"1111111111\",\n  \"jabatan\": \"Administrator\",\n  \"unit\": \"IT\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register new staff account"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has success field\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"Response has access_token\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('access_token');",
                  "    pm.expect(jsonData.data.access_token).to.be.a('string');",
                  "});",
                  "",
                  "pm.test(\"Response has user info with staff role\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "    pm.expect(jsonData.data.user).to.have.property('email');",
                  "    pm.expect(jsonData.data.user.role).to.eql('staff');",
                  "});",
                  "",
                  "// Save tokens for later use",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"access_token\", jsonData.data.access_token);",
                  "    pm.collectionVariables.set(\"refresh_token\", jsonData.data.refresh_token);",
                  "    pm.collectionVariables.set(\"user_id\", jsonData.data.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{test_staff_email}}\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login and get access token"
          }
        },
        {
          "name": "Verify Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has user data with staff role\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.expect(jsonData.data.role).to.eql('staff');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/verify",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "verify"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Profile Management",
      "item": [
        {
          "name": "Get Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has user profile data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.expect(jsonData.data).to.have.property('role');",
                  "    pm.expect(jsonData.data.role).to.eql('staff');",
                  "});",
                  "",
                  "pm.test(\"Response has staff data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('staff');",
                  "    pm.expect(jsonData.data.staff).to.have.property('nip');",
                  "    pm.expect(jsonData.data.staff).to.have.property('nama');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "profile"]
            }
          }
        },
        {
          "name": "Update Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Profile updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.staff.nama).to.include('Updated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"staff\": {\n    \"nama\": \"Test Staff Updated\",\n    \"jabatan\": \"Senior Administrator\",\n    \"unit\": \"IT\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/users/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "profile"]
            }
          }
        }
      ]
    },
    {
      "name": "3. Academic Calendar Management (Staff Only)",
      "item": [
        {
          "name": "Get All Events",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has events array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events?page=1&per_page=20",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Create Event",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has event data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('title');",
                  "    pm.expect(jsonData.data).to.have.property('start_date');",
                  "    pm.expect(jsonData.data).to.have.property('end_date');",
                  "});",
                  "",
                  "// Save event ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_event_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Ujian Akhir Semester\",\n  \"description\": \"Ujian akhir semester ganjil 2024/2025\",\n  \"event_type\": \"exam\",\n  \"start_date\": \"2024-12-20T08:00:00Z\",\n  \"end_date\": \"2024-12-27T17:00:00Z\",\n  \"is_all_day\": false,\n  \"location\": \"Gedung A\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events"]
            },
            "description": "Create academic event (Staff only)"
          }
        },
        {
          "name": "Update Event",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Event updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.title).to.include('Updated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Ujian Akhir Semester Updated\",\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events", "{{test_event_id}}"]
            },
            "description": "Update academic event (Staff only)"
          }
        },
        {
          "name": "Get Event by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has event data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('title');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events", "{{test_event_id}}"]
            }
          }
        },
        {
          "name": "Get Upcoming Events",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has upcoming events\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events/upcoming?limit=10",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events", "upcoming"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Event",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events/{{test_event_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "calendar", "events", "{{test_event_id}}"]
            },
            "description": "Delete academic event (Staff only)"
          }
        }
      ]
    },
    {
      "name": "4. Geofencing Management (Staff Only)",
      "item": [
        {
          "name": "Get All Geofences",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has geofences array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location/geofences",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "geofences"]
            },
            "description": "View all allowed geofence areas"
          }
        },
        {
          "name": "Create Geofence",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has geofence data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('name');",
                  "    pm.expect(jsonData.data).to.have.property('latitude');",
                  "    pm.expect(jsonData.data).to.have.property('longitude');",
                  "    pm.expect(jsonData.data).to.have.property('radius');",
                  "});",
                  "",
                  "// Save geofence ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_geofence_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Gedung Utama\",\n  \"description\": \"Geofence untuk gedung utama kampus\",\n  \"latitude\": -2.9916,\n  \"longitude\": 104.7565,\n  \"radius\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/geofences",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "geofences"]
            },
            "description": "Create geofence area (Staff only). Radius in meters."
          }
        },
        {
          "name": "Validate Location",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 400\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"Location is valid\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.data).to.have.property('id');",
                  "    });",
                  "} else {",
                  "    pm.test(\"Location is invalid\", function () {",
                  "        var jsonData = pm.response.json();",
                  "        pm.expect(jsonData.error.message).to.include('location');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitude\": -2.9916,\n  \"longitude\": 104.7565\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/validate",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "validate"]
            },
            "description": "Check if location is within allowed geofence"
          }
        }
      ]
    },
    {
      "name": "5. User Management (Staff Only)",
      "item": [
        {
          "name": "Search Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has users array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/search?q=test&role=mahasiswa",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "test"
                },
                {
                  "key": "role",
                  "value": "mahasiswa"
                }
              ]
            }
          }
        },
        {
          "name": "Get User by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has user data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.expect(jsonData.data).to.have.property('role');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{user_id}}"]
            }
          }
        },
        {
          "name": "Get Mahasiswa by NIM",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has mahasiswa data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('nim');",
                  "    pm.expect(jsonData.data).to.have.property('nama');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/mahasiswa/1234567890",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "mahasiswa", "1234567890"]
            }
          }
        },
        {
          "name": "Get Dosen by NIP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has dosen data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('nip');",
                  "    pm.expect(jsonData.data).to.have.property('nama');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/dosen/9876543210",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "dosen", "9876543210"]
            }
          }
        },
        {
          "name": "Get Staff by NIP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has staff data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('nip');",
                  "    pm.expect(jsonData.data).to.have.property('nama');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/staff/1111111111",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "staff", "1111111111"]
            }
          }
        }
      ]
    },
    {
      "name": "6. Work Attendance (HRIS) - Staff Only",
      "item": [
        {
          "name": "Check In",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 201\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "pm.test(\"Response has success field\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitude\": -2.9916,\n  \"longitude\": 104.7565\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/check-in",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "check-in"]
            }
          }
        },
        {
          "name": "Get Work Attendance Records",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has attendance records array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/records?page=1&per_page=20",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "records"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Shift Patterns",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has shift patterns array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});",
                  "",
                  "// Save first shift pattern ID if available",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.length > 0) {",
                  "        pm.collectionVariables.set(\"test_shift_pattern_id\", jsonData.data[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/shifts?page=1&per_page=20",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "shifts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Create Shift Pattern",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has shift pattern data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('shift_code');",
                  "    pm.expect(jsonData.data).to.have.property('shift_name');",
                  "});",
                  "",
                  "// Save shift pattern ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_shift_pattern_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shift_name\": \"Shift Pagi\",\n  \"shift_code\": \"SHIFT-001\",\n  \"start_time\": \"08:00\",\n  \"end_time\": \"17:00\",\n  \"break_duration_minutes\": 60,\n  \"is_night_shift\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/shifts",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "shifts"]
            },
            "description": "Create shift pattern (Dosen/Staff only)"
          }
        },
        {
          "name": "Update Shift Pattern",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Shift pattern updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('start_time');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"start_time\": \"09:00\",\n  \"end_time\": \"18:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/shifts/{{test_shift_pattern_id}}",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "work-attendance",
                "shifts",
                "{{test_shift_pattern_id}}"
              ]
            }
          }
        },
        {
          "name": "Create User Shift",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has user shift data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user_id');",
                  "    pm.expect(jsonData.data).to.have.property('shift_pattern_id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{user_id}}\",\n  \"shift_pattern_id\": \"{{test_shift_pattern_id}}\",\n  \"start_date\": \"2024-12-01\",\n  \"end_date\": \"2024-12-31\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/user-shifts",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "user-shifts"]
            },
            "description": "Assign shift pattern to user (Dosen/Staff only)"
          }
        },
        {
          "name": "Create Work Schedule",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has work schedule data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user_id');",
                  "    pm.expect(jsonData.data).to.have.property('date');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{user_id}}\",\n  \"shift_pattern_id\": \"{{test_shift_pattern_id}}\",\n  \"date\": \"2024-12-20\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/work-attendance/schedules",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "work-attendance", "schedules"]
            },
            "description": "Create work schedule (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "7. Course Management",
      "item": [
        {
          "name": "Get All Courses",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has courses array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});",
                  "",
                  "// Save first course ID if available",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.data && jsonData.data.length > 0) {",
                  "        pm.collectionVariables.set(\"test_course_id\", jsonData.data[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/courses?page=1&per_page=20",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Create Course",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has course data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('code');",
                  "    pm.expect(jsonData.data).to.have.property('name');",
                  "});",
                  "",
                  "// Save course ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_course_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"IF999\",\n  \"name\": \"Mata Kuliah Test\",\n  \"name_en\": \"Test Course\",\n  \"credits\": 3,\n  \"semester\": 1,\n  \"prodi\": \"Teknik Informatika\",\n  \"description\": \"Mata kuliah untuk testing\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/courses",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "courses"]
            },
            "description": "Create new course (Dosen/Staff only)"
          }
        },
        {
          "name": "Update Course",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Course updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.name).to.include('Updated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Mata Kuliah Test Updated\",\n  \"credits\": 4\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/courses/{{test_course_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "courses", "{{test_course_id}}"]
            }
          }
        },
        {
          "name": "Delete Course",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/courses/{{test_course_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "courses", "{{test_course_id}}"]
            },
            "description": "Delete course (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "8. Class Management",
      "item": [
        {
          "name": "Create Class",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has class data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('class_code');",
                  "});",
                  "",
                  "// Save class ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_class_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_id\": \"{{test_course_id}}\",\n  \"class_code\": \"IF999-A\",\n  \"class_name\": \"Kelas A\",\n  \"semester\": \"2024/2025\",\n  \"capacity\": 40,\n  \"dosen_id\": \"<dosen_id>\",\n  \"room\": \"Lab. Komputer 1\",\n  \"day_of_week\": 1,\n  \"start_time\": \"08:00\",\n  \"end_time\": \"10:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/classes",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "classes"]
            },
            "description": "Create new class (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "9. Enrollment Management",
      "item": [
        {
          "name": "Approve Enrollment",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Enrollment approved successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.status).to.eql('approved');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"approved\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/enrollments/{{test_enrollment_id}}/status",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "enrollments",
                "{{test_enrollment_id}}",
                "status"
              ]
            },
            "description": "Approve enrollment (Dosen/Staff only)"
          }
        },
        {
          "name": "Update Enrollment Grade",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Grade updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.grade).to.eql('A');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"grade\": \"A\",\n  \"score\": 95\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/enrollments/{{test_enrollment_id}}/grade",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "enrollments",
                "{{test_enrollment_id}}",
                "grade"
              ]
            },
            "description": "Update student grade (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "10. Schedule Management",
      "item": [
        {
          "name": "Create Schedule",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has schedule data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('date');",
                  "});",
                  "",
                  "// Save schedule ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_schedule_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"course_id\": \"{{test_course_id}}\",\n  \"course_code\": \"IF999\",\n  \"course_name\": \"Mata Kuliah Test\",\n  \"dosen_id\": \"<dosen_id>\",\n  \"room\": \"Lab. Komputer 1\",\n  \"day_of_week\": 1,\n  \"start_time\": \"08:00\",\n  \"end_time\": \"10:00\",\n  \"date\": \"2024-12-20\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/schedules",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "schedules"]
            },
            "description": "Create schedule (Dosen/Staff only)"
          }
        },
        {
          "name": "Delete Schedule",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/schedules/{{test_schedule_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "schedules", "{{test_schedule_id}}"]
            },
            "description": "Delete schedule (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "11. Attendance Management",
      "item": [
        {
          "name": "Generate QR Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has QR code data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('qr_code');",
                  "});",
                  "",
                  "// Save QR code",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_qr_code\", jsonData.data.qr_code);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schedule_id\": \"{{test_schedule_id}}\",\n  \"type\": \"kelas\",\n  \"duration\": 15\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/qr/generate",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "qr", "generate"]
            },
            "description": "Generate QR code for attendance (Dosen/Staff only)"
          }
        },
        {
          "name": "Create Manual Attendance",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has attendance data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"<student_id>\",\n  \"schedule_id\": \"{{test_schedule_id}}\",\n  \"type\": \"kelas\",\n  \"status\": \"hadir\",\n  \"date\": \"2024-12-15\",\n  \"notes\": \"Manual entry by staff\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/manual",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "manual"]
            },
            "description": "Create manual attendance entry (Dosen/Staff only)"
          }
        },
        {
          "name": "Update Attendance",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Attendance updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('status');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"izin\",\n  \"notes\": \"Student has permission\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/{{test_attendance_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "{{test_attendance_id}}"]
            },
            "description": "Update attendance record (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "12. Broadcast Management",
      "item": [
        {
          "name": "Create Broadcast",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has broadcast data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('title');",
                  "    pm.expect(jsonData.data).to.have.property('type');",
                  "});",
                  "",
                  "// Save broadcast ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_broadcast_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Pengumuman Penting\",\n  \"content\": \"Pengumuman untuk semua pengguna\",\n  \"type\": \"general\",\n  \"priority\": \"high\",\n  \"scheduled_at\": \"2024-12-16T10:00:00Z\",\n  \"expires_at\": \"2024-12-20T23:59:59Z\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/broadcasts",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "broadcasts"]
            },
            "description": "Create broadcast (Dosen/Staff only)"
          }
        },
        {
          "name": "Delete Broadcast",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200 or 204\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/broadcasts/{{test_broadcast_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "broadcasts", "{{test_broadcast_id}}"]
            },
            "description": "Delete broadcast (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "13. Leave Management",
      "item": [
        {
          "name": "Approve Leave Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Leave request approved successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.status).to.eql('approved');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"approver_notes\": \"Approved\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leave-requests/{{test_leave_request_id}}/approve",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "leave-requests",
                "{{test_leave_request_id}}",
                "approve"
              ]
            },
            "description": "Approve leave request (Dosen/Staff only)"
          }
        },
        {
          "name": "Reject Leave Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Leave request rejected successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.status).to.eql('rejected');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rejection_reason\": \"Not enough quota\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leave-requests/{{test_leave_request_id}}/reject",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "leave-requests",
                "{{test_leave_request_id}}",
                "reject"
              ]
            },
            "description": "Reject leave request (Dosen/Staff only)"
          }
        },
        {
          "name": "Create Leave Quota",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has leave quota data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('quota_days');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"<user_id>\",\n  \"leave_type\": \"ANNUAL_LEAVE\",\n  \"quota_days\": 12,\n  \"year\": 2024\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/leave-quotas",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "leave-quotas"]
            },
            "description": "Create leave quota (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "14. Master Data Management",
      "item": [
        {
          "name": "Create Study Program",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has study program data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('code');",
                  "    pm.expect(jsonData.data).to.have.property('name');",
                  "});",
                  "",
                  "// Save study program ID",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set(\"test_study_program_id\", jsonData.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"IF-TEST\",\n  \"name\": \"Teknik Informatika Test\",\n  \"name_en\": \"Informatics Engineering Test\",\n  \"faculty\": \"Fakultas Ilmu Komputer\",\n  \"degree_level\": \"S1\",\n  \"accreditation\": \"A\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/study-programs",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "study-programs"]
            },
            "description": "Create study program (Dosen/Staff only)"
          }
        },
        {
          "name": "Update Study Program",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Study program updated successfully\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.name).to.include('Updated');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Teknik Informatika Test Updated\",\n  \"accreditation\": \"A+\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/study-programs/{{test_study_program_id}}",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "study-programs",
                "{{test_study_program_id}}"
              ]
            }
          }
        },
        {
          "name": "Create Academic Period",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has academic period data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('period_code');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"period_code\": \"2024/2025\",\n  \"name\": \"Tahun Akademik 2024/2025\",\n  \"start_date\": \"2024-08-01\",\n  \"end_date\": \"2025-07-31\",\n  \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/academic-periods",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "academic-periods"]
            },
            "description": "Create academic period (Dosen/Staff only)"
          }
        },
        {
          "name": "Create Room",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has room data\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('code');",
                  "    pm.expect(jsonData.data).to.have.property('name');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"LAB-001\",\n  \"name\": \"Laboratorium Komputer 1\",\n  \"building\": \"Gedung A\",\n  \"floor\": 1,\n  \"capacity\": 40,\n  \"facilities\": \"Komputer, Proyektor\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/rooms",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "rooms"]
            },
            "description": "Create room (Dosen/Staff only)"
          }
        }
      ]
    },
    {
      "name": "15. Error Scenarios",
      "item": [
        {
          "name": "Create Course Without Required Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response indicates validation error\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "    pm.expect(jsonData.error.code).to.include('VALIDATION');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Invalid Course\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/courses",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "courses"]
            },
            "description": "Test validation error handling"
          }
        },
        {
          "name": "Delete Non-Existent Event",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 404\", function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test(\"Response indicates not found\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "    pm.expect(jsonData.error.code).to.include('NOT_FOUND');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/calendar/events/00000000-0000-0000-0000-000000000000",
              "host": ["{{base_url}}"],
              "path": [
                "api",
                "v1",
                "calendar",
                "events",
                "00000000-0000-0000-0000-000000000000"
              ]
            },
            "description": "Test 404 error handling"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_staff_email",
      "value": "test.staff@unsri.ac.id",
      "type": "string"
    },
    {
      "key": "test_staff_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_event_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_geofence_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_shift_pattern_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_course_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_class_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_enrollment_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_schedule_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_qr_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_attendance_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_broadcast_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_leave_request_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_study_program_id",
      "value": "",
      "type": "string"
    }
  ]
}


